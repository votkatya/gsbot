# 🎨 Обновление дизайна карточек заданий

## 📋 Описание изменений

Все карточки приведены к единому виду с тремя состояниями.

---

## 🎯 Состояние 1: Карточка в блоке заданий

### Внешний вид:
- ✅ **Иконка** - слева, в цветном квадрате (зеленый если выполнено, синий если активно)
- ✅ **Название блока** - бейдж с названием этапа (Разминка/Охота в клубе/Заминка) + зона
- ✅ **Заголовок** - название задания (один, без дублей)
- ✅ **Награды** - показываются под заголовком:
  - XP - синим цветом
  - Монеты - желтым цветом 🪙
- ✅ **Состояние выполнено**:
  - Зеленая иконка в квадрате
  - Зеленая обводка карточки
  - Галочка в правом верхнем углу

### Изменения:
- ❌ Убрана кнопка "Скан" из карточек
- ❌ Убран подзаголовок (subtitle) для избежания дублей
- ✅ Монеты отображаются желтым цветом

---

## 🔍 Состояние 2: Подробности задания (модальное окно)

### Единая структура для всех карточек:

#### Верхняя часть (одинакова для всех):
1. **Название раздела** - вверху слева (бейдж)
2. **Награды** - вверху справа (рядом с разделом):
   - XP - синим
   - Монеты - желтым 🪙
3. **Заголовок** - один, крупный, без дублей
4. **Описание** - текст задания

#### Нижняя часть (зависит от типа):

**Блок 1 (Разминка):**
- Задание 1: Анкета (форма опроса)
- Задание 2: Скачать приложение (ссылки + поле ввода кода)
- Задание 3: Соцсети (кнопка "Выполнить")

**Блок 2 (Охота в клубе):**
- Все задания: Кнопка "Сканировать QR-код"

**Блок 3 (Заминка):**
- Задания с полем ввода кода + кнопка "Выполнить" (неактивна пока код не введен)
- ИЛИ просто кнопка "Выполнить" для self-verification

---

## ✅ Состояние 3: Выполненное задание

### Внешний вид (одинаков для ВСЕХ заданий):

```
┌────────────────────────────────────┐
│  [Разминка]          +50 XP  +50🪙 │
│                                     │
│  Познакомимся?                      │
│                                     │
│  Заполни анкету, чтобы мы могли    │
│  лучше узнать тебя                 │
│                                     │
│  ┌──────────────────────────────┐  │
│  │  ✓  Награда получена         │  │
│  └──────────────────────────────┘  │
└────────────────────────────────────┘
```

**Элементы:**
- Бейдж с названием раздела + награды (вверху)
- Заголовок
- Описание
- Зеленый блок с галочкой и текстом "Награда получена"

---

## 📝 Изменения в коде

### 1. TaskCard.tsx
**Что убрано:**
- Подзаголовок (subtitle) - убран дубль
- Кнопка "Скан" - теперь только при открытии модалки

**Что осталось:**
- Иконка
- Название блока (бейдж)
- Один заголовок
- Награды (XP + монеты желтые)
- Галочка для выполненных
- Обводка зеленая для выполненных

---

### 2. TaskModal.tsx
**Полностью переработан с единой структурой:**

#### Состояние: Выполнено
```typescript
if (task.completed) {
  // Показываем:
  // - Бейдж + награды (вверху)
  // - Заголовок
  // - Описание
  // - Зеленый блок "Награда получена"
}
```

#### Задание 1: Анкета
```typescript
if (isSurveyTask) {
  // Показываем:
  // - Бейдж + награды
  // - Заголовок
  // - Описание
  // - Форма опроса
}
```

#### Задание 2: Скачать приложение
```typescript
if (isAppTask) {
  // Показываем:
  // - Бейдж + награды
  // - Заголовок
  // - Описание
  // - Ссылки на App Store/Google Play/RuStore
  // - Поле ввода кода
  // - Кнопка "Выполнить" (неактивна пока нет кода)
}
```

#### Блок 2: QR задания
```typescript
if (needsQRScan) { // stage === 2
  // Показываем:
  // - Бейдж + награды
  // - Заголовок
  // - Описание
  // - Кнопка "Сканировать QR-код"
}
```

#### Блок 1 & 3: Остальные задания
```typescript
// Показываем:
// - Бейдж + награды
// - Заголовок
// - Описание
// - Поле ввода кода (если нужна верификация)
// - Кнопка "Выполнить" (неактивна пока нет кода)
```

---

## 🎨 Цвета

### Монеты:
- ✅ **Желтый** - `text-yellow-500`

### Иконки:
- **Активная** - `text-primary` (синий)
- **Выполненная** - `text-success` (зеленый)
- **Заблокированная** - `text-muted-foreground` (серый)

### Обводка карточки:
- **Обычная** - `border-border`
- **Выполненная** - `border-success/30` (зеленая полупрозрачная)

### Фон иконки:
- **Активная** - `bg-primary/20` (синий полупрозрачный)
- **Выполненная** - `bg-success/20` (зеленый полупрозрачный)
- **Заблокированная** - `bg-muted` (серый)

---

## ✨ Преимущества нового дизайна

1. **Единообразие** - все карточки следуют одной структуре
2. **Чистота** - нет дублей в заголовках
3. **Консистентность** - награды всегда в одном месте
4. **Ясность** - сразу понятно, что нужно делать
5. **Удобство** - кнопка "Выполнить" неактивна, пока не введен код

---

## 📱 Примеры состояний

### Карточка в списке (не выполнена)
```
┌─────────────────────────────────────┐
│  [🏋️] Разминка  •  Профиль          │
│                                      │
│  Познакомимся?                       │
│                                      │
│  +50 XP    +50 🪙                    │
└─────────────────────────────────────┘
```

### Карточка в списке (выполнена)
```
┌─────────────────────────────────────┐
│  [✓] Разминка  •  Профиль        [✓]│
│                                      │
│  Познакомимся?                       │
│                                      │
│  +50 XP    +50 🪙                    │
└─────────────────────────────────────┘
   (зеленая обводка и иконка)
```

### Модалка: Не выполнено
```
┌─────────────────────────────────────┐
│  [Разминка]          +50 XP  +50🪙  │
│                                      │
│  Познакомимся?                       │
│                                      │
│  Заполни анкету, чтобы мы могли     │
│  лучше узнать тебя                  │
│                                      │
│  [Поле ввода или кнопка]            │
└─────────────────────────────────────┘
```

### Модалка: Выполнено
```
┌─────────────────────────────────────┐
│  [Разминка]          +50 XP  +50🪙  │
│                                      │
│  Познакомимся?                       │
│                                      │
│  Заполни анкету, чтобы мы могли     │
│  лучше узнать тебя                  │
│                                      │
│  ┌────────────────────────────────┐ │
│  │  ✓  Награда получена           │ │
│  └────────────────────────────────┘ │
└─────────────────────────────────────┘
```

---

## 🚀 Следующие шаги

1. ✅ Обновлены компоненты TaskCard и TaskModal
2. 🔄 Нужно протестировать на сервере
3. 📦 Собрать новый билд
4. 🚀 Задеплоить на production

**Команды для деплоя:**
```bash
cd /var/www/gorodsporta
git pull origin main
cd webapp-react
npm run build
cd ..
cp -r webapp-react/dist/* deploy/
systemctl reload nginx
```

---

**Дата обновления:** 12 февраля 2026
**Версия:** 2.0
